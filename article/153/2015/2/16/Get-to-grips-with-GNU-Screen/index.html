<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Get to grips with GNU Screen Perl programming news, code and culture</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Once you start using a multiplexer, you&#39;ll never go back"/>
    <meta name="robots" content="index, follow">
    <link rel="icon" href="/favicon.ico">
    
</head>
<body>

<div class="container antonio">
  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <ul class="nav navbar-nav pull-right follow">
          <li>FOLLOW US:</li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perltricks">
              <img src="/images/header/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/index.xml" />
              <img src="/images/header/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/dnmfarrell/perltricks-static/" />
              <img src="/images/header/github_light_20.png" alt="GH"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-brand" href="/">
          <img src="/images/header/perltricks_logo.png" alt="PerlTricks" />
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/">
              <div class="circle">
                  <span class="glyphicon glyphicon-home txt-perltricks-blue" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;HOME</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-pencil txt-perltricks-blue" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/about">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-perltricks-blue" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="push"></div>

  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <article>
            <h1 class="blog-post-title">Get to grips with GNU Screen</h1>
            <p class="blog-post-meta">Feb 16, 2015 by <a href="/authors/david-farrell">David Farrell</a></p>
            <img alt="" src="/images/153/A8652C2A-B58C-11E4-ADDC-6A05DB487E9F.png"/>
              

<p>GNU Screen is a terminal multiplexer, a program that manages terminal windows. It&rsquo;s been around for 28 years, which makes it older than Perl 5. So if you thought Perl had some archaic conventions, you ain&rsquo;t seen nothing yet. But despite it&rsquo;s age Screen is a powerful tool for managing terminals; if you often find yourself using more than one terminal, you owe it to yourself to start using a multiplexer for major productivity gains. Screen is the most widely used multiplexer, another popular option is <a href="http://tmux.sourceforge.net/">tmux</a>, but this article is about Screen.</p>

<h3 id="getting-started:b3b4c08bbb2a80fadc5ed53bc347292f">Getting started</h3>

<p>Start Screen by simply typing <code>screen</code> at the command line:</p>

<pre><code class="language-prettyprint">$ screen
</code></pre>

<p>All commands in Screen start with the prefix <code>Control + a</code>. The first command to learn is the most important; how to display the commands menu! To do this type <code>Control + a, ?</code> (that is, press Control and the &ldquo;A&rdquo; key, release the keys and then type question mark). If you remember this one command, you can always get yourself out of trouble, even if you forget some of the other commands.</p>

<h3 id="managing-windows:b3b4c08bbb2a80fadc5ed53bc347292f">Managing windows</h3>

<p>To open a new terminal window, type <code>Control + a, c</code>. Screen will create a new window - this is a new terminal process. To see a list of open windows, type <code>Control + a, &quot;</code>. You can press up and down to highlight the window you want to use, and press enter to open it.</p>

<p>You can also cycle through windows, by pressing <code>Control + a, n</code> to move to the next window and <code>Control + a, p</code> to move to the previous one. Every window is assigned a number, and you can jump straight to a window with: <code>Control + a, #</code> where the pound key is the number window to jump to.</p>

<p>Finally if you want to kill a window type <code>Control + a, k</code>. To kill all windows and exit screen the combination is: <code>Control + a, \</code></p>

<h3 id="split-screen:b3b4c08bbb2a80fadc5ed53bc347292f">Split Screen</h3>

<p>Screen can split the terminal window into multiple windows. This is really helpful if you need to look at multiple terminals simultaneously. Any window can be split vertically or horizontally and multiple times, leading to all kinds of <a href="https://encrypted.google.com/search?tbm=isch&amp;q=gnu%20screen&amp;tbs=imgo:1">combinations</a>. To vertically split the screen type: <code>Control + a, |</code> and to horizontally split type: <code>Control + a, S</code>.</p>

<p>To highlight the next split window, type <code>Control + a, tab</code> (there&rsquo;s also a config option to select by mouse click, more on that later). The combination <code>Control + a, Q</code>. will quit split screen mode.</p>

<h3 id="copy-and-paste:b3b4c08bbb2a80fadc5ed53bc347292f">Copy and paste</h3>

<p>Copying and pasting with Screen isn&rsquo;t super easy. So much so that I often found myself using the terminal copy and paste instead (highlight with mouse, then <code>Control + C</code>, <code>Control + V</code>). However it&rsquo;s useful to know Screen&rsquo;s copy and paste because terminal copy and paste just crumbles on split screen mode, and you may want to use the mouse select for something more useful anyway.</p>

<p>Copy and paste is modal, so you first have to enter &ldquo;copy mode&rdquo;. To do that type <code>Control + a, [</code>. Now move the cursor to the beginning of the text you want to copy. Press <code>space</code> to mark it and use the arrow keys (or h, j, k, l) to move the cursor to the end of the text you want to copy. Pressing <code>space</code> again will copy the highlighted text. To paste, type <code>Control + a, ]</code>. Ew.</p>

<h3 id="scrolling:b3b4c08bbb2a80fadc5ed53bc347292f">Scrolling</h3>

<p>By default Screen prevents scrolling using the X-Window scrollbar (it also doesn&rsquo;t keep much history). This can be get very annoying, so you&rsquo;ll want to know how to scroll. To do so, you need to enter copy mode with <code>Control + a, [</code>. and then press <code>Control + u</code> to scroll up and <code>Control + d</code> to go down. Press <code>escape</code> to exit copy mode. And until you can remember the combinations for scrolling, you&rsquo;ll find yourself piping output to <code>less</code> more than you ever imagined.</p>

<h3 id="detaching-screen-sessions:b3b4c08bbb2a80fadc5ed53bc347292f">Detaching Screen Sessions</h3>

<p>Screen sessions can be put into the background just like any other terminal process. Screen will keep open any terminal processes (like ssh sessions). This is very useful - if you find yourself working with more than 5 or 6 windows, it might be easier to detach and start a new screen session than adding more windows. To detach screen, the combination is <code>Control + a, d</code>. When you detach, screen will print the session name and return to the terminal prompt. To re-attach to a detached session just use <code>screen -r</code>:</p>

<pre><code class="language-prettyprint">$ screen -r
</code></pre>

<p>If you have more than one screen session, you can display all detached sessions with <code>-ls</code>:</p>

<pre><code class="language-prettyprint">$ screen -ls
There are screens on:
    30549.pts-1.localhost   (Detached)
    30498.pts-1.localhost   (Detached)
    29207.pts-1.localhost   (Detached)
3 Sockets in /var/run/screen/S-sillymoose.
</code></pre>

<p>Then just re-attach to the session you want by providing the session name as an option to <code>-r</code></p>

<pre><code class="language-prettyprint">$ screen -r 29207
</code></pre>

<p>But if you&rsquo;ve really got multiple Screen sessions going, it can be hard to remember what they&rsquo;re all doing. So when you start Screen, use the <code>-S</code> option to give the session a name:</p>

<pre><code class="language-prettyprint">$ screen -S aws_ec2
</code></pre>

<p>If you name all your sessions, it&rsquo;s much easier to know which one to re-attach to:</p>

<pre><code class="language-prettyprint">$ screen -ls
There are screens on:
    31155.aws_ec2   (Detached)
    30866.email_servers (Detached)
    30815.ecommerce_app (Detached)
3 Sockets in /var/run/screen/S-sillymoose.

$ screen -r email_servers
</code></pre>

<h3 id="customizing-screen:b3b4c08bbb2a80fadc5ed53bc347292f">Customizing Screen</h3>

<p>Screen is highly configurable which is good because you&rsquo;ll probably want to change a few of the default options. The first option you should consider isn&rsquo;t a Screen option at all however.</p>

<p>To stop your ssh sessions from timing out, add the following to your <code>~/.ssh/config</code> file:</p>

<pre><code class="language-prettyprint"># dont timeout connections
ServerAliveInternal 600
</code></pre>

<p>If the <code>~/.ssh/config</code> file didn&rsquo;t already exist, you may have to change the permissions on the file:</p>

<pre><code class="language-prettyprint">$ chmod 644 ~/.ssh/config
</code></pre>

<p>This option will have ssh send a byte every 10 minutes to the remote server to keep the session alive. You may want to change the frequency depending on your needs. Now you can have multiple ssh windows within screen, detach them for hours and return and you&rsquo;ll still be logged in.</p>

<p>Like many other terminal programs, screen will look for a runcom config file (<code>~/.screenrc</code>). I like the following options:</p>

<pre><code class="language-prettyprint"># no welcome message
startup_message off

# keep running processes on detach
autodetach on

# start windows at 1 instead of 0
bind c screen 1
bind ^c screen 1
bind 0 select 10
screen 1

# large scrollback buffer
defscrollback 5000

# on split screen, switch window focus by clicking
mousetrack on

# refresh screen after closing a program
altscreen on
</code></pre>

<p>There are loads more options to choose from. Screen has a huge online <a href="https://www.gnu.org/software/screen/manual/screen.html">manual</a> and it&rsquo;s terminal man page is comprehensive too. Any typed command listed in the manual can be run from within screen, or added to the <code>~/.screenrc</code> file. For instance if you don&rsquo;t like Screen&rsquo;s default key bindings, checkout the <code>bindkey</code> command for overriding them, as you don&rsquo;t want to be typing them for another 28 years.</p>

<h3 id="screen-cheatsheet:b3b4c08bbb2a80fadc5ed53bc347292f">Screen Cheatsheet</h3>

<pre><code># Type before other commands
Prefix: Control + a

Shortcuts menu: ?

New window:    c      Split Vertical:   |       Copy mode:     [
Close window:  k      Split Horizontal: S       Start copy:    space
Next window:   n      Focus next region: tab    Scroll up:     u
Prior window:  p      Quit split screem: Q      Scroll down:   d
Jump window #: 0-9                              End copy:      space
List windows:  &quot;                                Paste:         ]
                                                End copy mode: escape

Detach: d
Quit:   \

# Terminal commands
Launch Screen:     screen
Named session:     screen -S &lt;name&gt;
List sessions:     screen -ls
Re-attach session: screen -r [name]
</code></pre>

            </article>
            <p><strong>Tags</strong></p>
            <div class="tags">
              
                <div class="tag"><a href="/tags/command_line">command_line</a></div>
              
                <div class="tag"><a href="/tags/multiplexer">multiplexer</a></div>
              
                <div class="tag"><a href="/tags/old_site">old_site</a></div>
              
                <div class="tag"><a href="/tags/screen">screen</a></div>
              
                <div class="tag"><a href="/tags/sysadmin">sysadmin</a></div>
              
                <div class="tag"><a href="/tags/terminal">terminal</a></div>
              
                <div class="tag"><a href="/tags/terminator">terminator</a></div>
              
                <div class="tag"><a href="/tags/tmux">tmux</a></div>
              
            </div>
            <div class="push"></div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-perltricks-blue">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
        
        
  <div class="row">
      <a href="http://perltricks.com/article/an-introduction-to-tmux/">
    <div class="col-sm-3">
      <div class="circle-avatar" style="background-image:url(http://googledrive.com/host/0BwRnByTz2iUXazVBdzNFRU1QV1k)"></div>
    </div>
    <div class="col-sm-9">
        <h6>An introduction to Tmux</h6>
        <p style="line-height:1"><small>How to get started with the open source terminal multiplexer </small></p>
    </div>
      </a>
  </div>
  
        
        
  <div class="row">
      <a href="http://perltricks.com/article/magical-tied-scalars/">
    <div class="col-sm-3">
      <div class="circle-avatar" style="background-image:url(/images/author/brian.jpg)"></div>
    </div>
    <div class="col-sm-9">
        <h6>Magical tied scalars</h6>
        <p style="line-height:1"><small>Subvert and simplify code with tied scalars</small></p>
    </div>
      </a>
  </div>
  
        
        
  <div class="row">
      <a href="http://perltricks.com/article/213/2016/2/10/What-s-new-on-CPAN---January-2015/">
    <div class="col-sm-3">
      <div class="circle-avatar" style="background-image:url(/images/213/AF57B300-5234-11E5-B481-F86745487EAA.png)"></div>
    </div>
    <div class="col-sm-9">
        <h6>What&#39;s new on CPAN - January 2016</h6>
        <p style="line-height:1"><small>A curated look at January&#39;s new CPAN uploads</small></p>
    </div>
      </a>
  </div>
  
        
        
  <div class="row">
      <a href="http://perltricks.com/article/212/2016/2/2/Get-an-in-browser-remote-desktop-with-Mojolicious-and-noVNC/">
    <div class="col-sm-3">
      <div class="circle-avatar" style="background-image:url(/images/212/0156BEFE-C9B2-11E5-A2BB-E80C3AD1818C.jpeg)"></div>
    </div>
    <div class="col-sm-9">
        <h6>Get an in-browser remote desktop with Mojolicious and noVNC</h6>
        <p style="line-height:1"><small>Using Mojolicious as a TCP/WebSocket Bridge</small></p>
    </div>
      </a>
  </div>
  
        
        
  <div class="row">
      <a href="http://perltricks.com/article/210/2016/1/21/Twitter-as-a-datastore/">
    <div class="col-sm-3">
      <div class="circle-avatar" style="background-image:url(/images/210/B6ABE53E-C045-11E5-B2C3-641B7A54B0AF.png)"></div>
    </div>
    <div class="col-sm-9">
        <h6>Twitter as a datastore</h6>
        <p style="line-height:1"><small>Using social media platforms for computing applications</small></p>
    </div>
      </a>
  </div>
  
</div>

            <div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/PerlTricks" data-widget-id="618973837762383879">Tweets by @PerlTricks</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/">Articles</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-4">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: editor@perltricks.com</p>
        <p>Follow us:&nbsp;
          <a href="https://twitter.com/intent/follow?screen_name=perltricks">
              <img src="/images/footer/twitter_20_dark.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/footer/rss_20_dark.png" alt="rss"></a>
          <a href="https://github.com/dnmfarrell/perltricks-static/" />
              <img src="/images/header/github_light_20.png" alt="GH"></a></p>
          <p>&copy; <span id="year"></span> PerlTricks.com</p>
      </div>
      <div class="col-md-7">
          <h5>Legal</h5>
          <p>PerlTricks.com and the authors make no representations or warranties with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. No warranty may be created or extended. The advice and strategies published on this website may not be suitable for every situation. All work on this website is provided with the understanding that PerlTricks.com and the authors are not engaged in rendering legal, accounting, or other professional services. Neither PerlTricks.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/perltricks.css"/>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script src="/javascript/prettify.min.js"></script>
<script>document.getElementById("year").innerHTML = (new Date()).getFullYear();prettyPrint();</script>
</body>
</html>

